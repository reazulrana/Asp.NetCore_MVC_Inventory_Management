@model SaleDetailsViewModel

@{
    ViewBag.Title = "Sale Edit List";

}

<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="table-responsive  mt-3">
                <table class="table text-center" border="1">
                    <thead class="table-info">
                        <tr>
                            <th><small>SL</small></th>
                            <th><small>Invoice No# </small> </th>
                            <th><small>Invoice Date</small> </th>
                            <th><small>Branch</small> </th>
                            <th><small>Payment Type</small> </th>
                            <th><small>Product Price</small> </th>
                            <th><small>Cash On Payment</small> </th>
                            <th><small>Dues</small> </th>
                            <th><small>Transport</small> </th>
                            <th><small>Others</small> </th>
                            <th><small>Discount</small> </th>
                            <th><small>Net Amount</small> </th>
                            <th colspan="2"><small>Edit/Delete</small> </th>

                        </tr>
                    </thead>
                    <tbody id="saleproductlist">

                        @if (Model.saleDetailsViewModels.Count > 0)
                        {
                            int sl = Model.PageIndex * Model.PageSize <= 0 ? 1 : ((Model.PageIndex * Model.PageSize) - Model.PageSize) + 1;
                            foreach (var p in Model.saleDetailsViewModels)
                            {
                                decimal paymentPercent = (Convert.ToDecimal(p.PaymentOnCash) / Convert.ToDecimal(p.NetAmount)) * 100;
                                //string _photopath = (p.photopath == null || p.photopath == "") ? "~/" + ImagePath.GetDefaultImagePath("No_Image_Avaiable.jpg") : "~/" + ImagePath.GetProductImagePath(p.photopath);
                                //int totalamount = p.qty * p.price;
                                <tr data-id="@p.SaleID">
                                    <td>@sl </td>
                                    <td>@p.Invoice</td>
                                    <td>@p.TrDate</td>
                                    <td>@p.Branch </td>
                                    <td><span class="badge @(p.PaymentType.ToLower()=="cash" ? "badge-secondary":p.PaymentType.ToLower()=="dues"?"badge-danger":"badge-primary")"> @p.PaymentType</span></td>
                                    <td>@p.TotalAmount</td>
                                    <td>
                                        @p.PaymentOnCash
                                        <div class="progress">
                                            <div class="progress-bar bg-danger progress-animated" style="width:@(paymentPercent)%;" role="progressbar" title="@((int) paymentPercent) %">
                                                <span class="sr-only">@(paymentPercent)% Paid</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>@p.Dues</td>
                                    <td>@p.Transport</td>
                                    <td>@p.Others</td>
                                    <td>@p.Discount</td>
                                    <td>@p.NetAmount</td>
                                    <td>
                                        <form class="input-group" method="post" asp-controller="Sale" asp-action="Delete" asp-route-id="@p.SaleID">
                                            <a asp-controller="Report" asp-action="PrintSaleInvoice" asp-route-saleid="@p.SaleID" class="btn btn-outline-primary btn-xs" title="Print Invoice"><span class="ml-1"><i class="mdi mdi-view-list"></i></span></a>
                                            <a asp-controller="Sale" asp-action="Edit" asp-route-id="@p.SaleID" class="btn btn-outline-success btn-xs" title="Details"><span class="ml-1"><i class="mdi mdi-eye"></i></span></a>
                                            <a asp-controller="Sale" asp-action="Edit" asp-route-id="@p.SaleID" class="btn btn-outline-info btn-xs" title="Edit"><span class="ml-1"><i class="mdi mdi-pencil"></i></span></a>
                                            <button type="submit" class="btn btn-outline-danger btn-xs" title="Delete"><span class="ml-1"><i class="mdi mdi-delete"></i></span></button>
                                        </form>
                                    </td>



                                </tr>
                                sl = sl + 1;
                            }
                        }
                    </tbody>

                </table>

                <partial name="~/Views/Shared/Pagination/_PaginationPage.cshtml" model="Model" />
            </div>

        </div>


        @*customer Information*@

        <div class="row border py-2">
            <div class="col-md-12 bg-secondary">
                <h4 class="text-white py-2">Customer Information</h4>
            </div>
            <div class="col-md-4 px-2 mt-2">

                <img class="img-fluid" src="~/Projects/Images/DefaultImage/No_Image_Available.jpg" />

            </div>
            <div class="col-md-8 px-2 mt-2">
                <div class="table-responsive">
                    <table class="table table-sm table-bordered">
                        <tbody>
                            <tr>
                                <td>Name</td>
                                <td>:</td>
                                <td class="text-blue"><h4 class="text-blue">Md.Reazul Islam</h4></td>
                            </tr>
                            <tr>
                                <td>Address</td>
                                <td>:</td>
                                <td class="text-blue"><strong>124/3 Moneshwer Road Zigatola Dhaka</strong></td>
                            </tr>
                            <tr>
                                <td>Contact No</td>
                                <td>:</td>
                                <td class="text-blue"><h5 class="text-blue">01922531242,01910063524</h5></td>
                            </tr>
                            <tr>
                                <td>Type</td>
                                <td>:</td>
                                <td class="text-blue">Regular</td>
                            </tr>
                            <tr>
                                <td>Reference</td>
                                <td>:</td>
                                <td class="text-blue">None</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>



        @*Sales Details Information*@

        <div class="row border py-2 mt-2">
            <div class="col-md-12 bg-blue-dark mb-3">
                <h4 class="text-white py-2">Sales Information</h4>
            </div>
            <div class="col-md-6 px-2">
                <div class="table-responsive">
                    <table class="table table-sm">
                        <tbody>
                            <tr>
                                <td>Invoice No#</td>
                                <td>:</td>
                                <td class="text-blue"><h4>Md.Reazul Islam</h4></td>
                            </tr>
                            <tr>
                                <td>Invoice Date</td>
                                <td>:</td>
                                <td class="text-blue"><strong>124/3 Moneshwer Road Zigatola Dhaka</strong></td>
                            </tr>
                            <tr>
                                <td>Branch</td>
                                <td>:</td>
                                <td class="text-blue"><h5>01922531242,01910063524</h5></td>
                            </tr>
                            <tr>
                                <td>Invoice Type</td>
                                <td>:</td>
                                <td>Regular</td>
                            </tr>
                           
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="col-md-6 px-2">
                <div class="table-responsive">
                    <table class="table border-no">
                        <tbody>
                            <tr class="border-bottom">
                                <td> <div style="position: relative; border: 1px solid blue; width: 100px; height: 100px; border-radius: 50%; background-color: darkblue; background-image: linear-gradient(to bottom right,blue,white)"><h4 style="position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:25px;color:white">16500</h4></div>            </td>
                                <td> <div style="position: relative; border: 1px solid green; background-color: darkgreen; background-image: linear-gradient(to bottom right,darkgreen,white); width: 90px; height: 90px; border-radius: 50%"><h5 style="position: absolute; top: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white"> 13500</h5></div></td>
                                <td> <div style="position: relative; border: 1px solid red; background-color: darkred; background-image: linear-gradient(to bottom right,darkred,white); width: 90px; height: 90px; border-radius: 50% "><h5 style="position: absolute; top: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white"> 3000</h5></div></td>




                            </tr>
                            <tr>
                                <td> <div style="position: relative; width: 100px; height: 100px;"><h4 style="position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:15px;color:wheat">Invoice Amount</h4></div>            </td>
                                <td> <div style="position: relative; width: 100px; height: 100px;"><h4 style="position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:15px;color:green">Paid</h4></div></td>
                                <td> <div style="position: relative; width: 100px; height: 100px;"><h4 style="position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:15px;color:red">Dues</h4></div></td>


                            </tr>
                            <tr>
                            </tr>
                            <tr>
                                <td colspan="3">
                                    <h6>Paid Amount <span class="pull-right">80%</span></h6>
                                    <div class="progress" style="height:14px">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width:80%">
                                            <span><small>80%</small></span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
             
            </div>

        </div>


        @*prdocut list Information*@
    <div class="row">
        <div class="table-responsive mt-3">
            <table class="table table-bordered text-center">
                <thead class="bg-blue">
                    <tr class="text-white">
                        <th><small>SL</small></th>
                        <th><small>Image</small></th>
                        <th><small>Code</small></th>
                        <th><small>Description</small></th>
                        <th><small>Model</small></th>
                        <th><small>Size</small></th>
                        <th><small>Color</small></th>
                        <th><small>Qty</small></th>
                        <th><small>Price</small></th>
                        <th><small>Total Amount</small></th>

                    </tr>
                </thead>
                <tbody id="modelsaleinvoicedetails"><tr><td>1</td><td> <img height="72" width="72" src="/Projects/Images/Product/8cee84f1-9928-44bb-bfca-0d356fbe1a6d_SP-01.jpg"></td><td>SP-01</td><td>Two fita b.C</td><td>SP-01</td><td>39</td><td>BLACK</td><td>10</td><td>500</td><td>5000</td></tr></tbody>

            </table>
        </div>
    </div>



        @*Bill Information*@
    <div class="row">
        <div class="col-md-12 px-2 mt-2">
            <div class="col-md-4 table-responsive float-right">
                <table class="table table-sm border-no">
                    <tbody>
                        <tr class="border-bottom">
                            <td>Sub Total</td>
                            <td>:</td>
                            <td class="text-blue"><h5>15000</h5></td>
                        </tr>

                        <tr class="border-bottom">
                            <td>Cash On Payment</td>
                            <td>:</td>
                            <td class="text-blue"><h5>13500</h5></td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Dues</td>
                            <td>:</td>
                            <td class="text-blue"><h5>1500</h5></td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Transport Cost</td>
                            <td>:</td>
                            <td class="text-blue">1500</td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Other Charges</td>
                            <td>:</td>
                            <td>500</td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Total Amount</td>
                            <td>:</td>
                            <td>17000</td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Discount</td>
                            <td>:</td>
                            <td>500</td>
                        </tr>
                        <tr class="border-bottom">
                            <td>Net Amount</td>
                            <td>:</td>
                            <td>16500</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    </div>
</div>



@section
{
<script lang="ja">


    $(document).ready(function () {


        $("#saleproductlist tr").dblclick(function () {


            let id = $(this).data("id");

            $.ajax({
                url: '@Url.Action("GetInvoiceDetails_Ajax","Sale")',
                method: "Get",
                data: "",
                dataType: "JSON",
                success: function (data) {

                },
                error: function (xhr)
                {
                    alert(xhr.responseText);
                }


            }) //end of ajax 




        })


    })

</script>
}